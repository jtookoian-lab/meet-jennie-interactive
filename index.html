<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meet Jennie - Memory Game</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&amp;family=Nunito:wght@400;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    
    * {
      font-family: 'Nunito', sans-serif;
    }
    
    .game-title {
      font-family: 'Fredoka', sans-serif;
    }
    
    .card-container {
      perspective: 1000px;
    }
    
    .card {
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .card.flipped {
      transform: rotateY(180deg);
    }
    
    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .card-back {
      transform: rotateY(180deg);
    }
    
    .card.matched {
      animation: matchPulse 0.5s ease-out;
    }
    
    @keyframes matchPulse {
      0%, 100% { transform: rotateY(180deg) scale(1); }
      50% { transform: rotateY(180deg) scale(1.1); }
    }
    
    @keyframes confetti {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(-100px) rotate(720deg); opacity: 0; }
    }
    
    .confetti-piece {
      position: absolute;
      animation: confetti 1s ease-out forwards;
    }
    
    .question-card {
      animation: slideIn 0.4s ease-out;
    }
    
    @keyframes slideIn {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
    }
    
    .card-front-pattern {
      background: linear-gradient(135deg, #00C4CC 0%, #7B2CBF 100%);
      position: relative;
      overflow: hidden;
    }
    
    .card-front-pattern::before {
      content: '‚ú®';
      position: absolute;
      font-size: 24px;
      opacity: 0.3;
    }
    
    .card-front-pattern::after {
      content: 'üé®';
      position: absolute;
      font-size: 20px;
      opacity: 0.2;
      bottom: 10px;
      right: 10px;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full gradient-bg overflow-auto">
  <div id="app" class="min-h-full w-full p-4 md:p-8"><!-- Header -->
   <header class="text-center mb-6">
    <h1 id="game-title" class="game-title text-4xl md:text-5xl font-bold text-white drop-shadow-lg mb-2">Meet Jennie</h1>
    <p id="subtitle" class="text-white/90 text-lg md:text-xl font-medium">A Memory Game for Canva üéØ</p>
   </header><!-- Stats Bar -->
   <div class="flex justify-center gap-4 md:gap-8 mb-6">
    <div class="bg-white/20 backdrop-blur-sm rounded-2xl px-4 py-2 md:px-6 md:py-3"><span class="text-white/80 text-sm">Score</span>
     <p id="score" class="text-white text-2xl font-bold text-center">0</p>
    </div>
    <div class="bg-white/20 backdrop-blur-sm rounded-2xl px-4 py-2 md:px-6 md:py-3"><span class="text-white/80 text-sm">Moves</span>
     <p id="moves" class="text-white text-2xl font-bold text-center">0</p>
    </div>
    <div class="bg-white/20 backdrop-blur-sm rounded-2xl px-4 py-2 md:px-6 md:py-3"><span class="text-white/80 text-sm">Matches</span>
     <p id="matches" class="text-white text-2xl font-bold text-center">0/6</p>
    </div>
   </div><!-- Game Board -->
   <div id="game-board" class="grid grid-cols-3 md:grid-cols-4 gap-3 md:gap-4 max-w-2xl mx-auto mb-6"><!-- Cards will be generated here -->
   </div><!-- Question Modal -->
   <div id="question-modal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50">
    <div class="question-card bg-white rounded-3xl p-6 md:p-8 max-w-lg w-full shadow-2xl">
     <div class="text-center mb-4"><span class="text-4xl mb-2 block" id="question-emoji">üí¨</span>
      <h3 class="text-xl md:text-2xl font-bold text-purple-800 mb-2">Conversation Starter!</h3>
     </div>
     <p id="question-text" class="text-gray-700 text-lg md:text-xl text-center mb-6 leading-relaxed"></p><button id="close-question" class="w-full bg-gradient-to-r from-purple-600 to-pink-500 text-white font-bold py-3 px-6 rounded-2xl hover:opacity-90 transition-opacity text-lg"> Got it! üëç </button>
    </div>
   </div><!-- Win Modal -->
   <div id="win-modal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50">
    <div class="question-card bg-white rounded-3xl p-6 md:p-8 max-w-lg w-full shadow-2xl text-center"><span class="text-6xl mb-4 block">üéâ</span>
     <h2 class="game-title text-3xl font-bold text-purple-800 mb-2">Amazing!</h2>
     <p class="text-gray-600 text-lg mb-2">You've completed the game!</p>
     <p id="win-stats" class="text-purple-600 font-semibold mb-6"></p><button id="play-again" class="w-full bg-gradient-to-r from-purple-600 to-pink-500 text-white font-bold py-3 px-6 rounded-2xl hover:opacity-90 transition-opacity text-lg"> Play Again üîÑ </button>
    </div>
   </div><!-- Instructions -->
   <div class="max-w-2xl mx-auto">
    <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-4 text-white/90 text-center">
     <p class="text-sm md:text-base">üéÆ <strong>How to play:</strong> Match pairs to unlock conversation starters! Quick matches earn bonus points ‚ö°</p>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      game_title: "Meet Jennie",
      subtitle: "A Memory Game for Canva üéØ",
      primary_color: "#667eea",
      secondary_color: "#00C4CC",
      accent_color: "#f093fb",
      text_color: "#ffffff",
      card_color: "#7B2CBF"
    };

    const emojis = ['üéì', 'üéì', 'üéì', 'üíº', 'üíº', 'üíº'];
    
    const questions = [
      // Canva User Journey
      { emoji: 'üé®', text: "Jennie has used Canva for 5-7 years! Ask her: What's the most creative project you've built in Canva?" },
      { emoji: 'üíú', text: "Canva went from 'handy free tool' to essential for Jennie! Ask her: What was the turning point when Canva became indispensable?" },
      { emoji: 'üåü', text: "Jennie says 'two worlds are colliding' with this role! Ask her: Why is the Field Enablement position at Canva special to you?" },
      
      // Learning Science & M.Ed. Expertise
      { emoji: 'üéì', text: "Jennie has an M.Ed. in learning science! Ask her: How does adult learning theory change how you design training?" },
      { emoji: 'üìö', text: "Jennie has formal training in learning science! Ask her: What's one learning principle everyone in enablement should know?" },
      { emoji: 'üé≠', text: "Jennie sees enablement as 'scratching the itch to be a teacher'! Ask her: What do you miss most about traditional teaching?" },
      
      // GTM & Revenue Enablement Wins
      { emoji: 'üöÄ', text: "Sellers who passed Jennie's certification increased closed-won deals by 15%! Ask her: What made that program so effective?" },
      { emoji: 'üéØ', text: "Jennie helped hit both new business AND renewal targets for the first time ever! Ask her: How did enablement contribute to that success?" },
      { emoji: 'üíº', text: "Jennie has 15+ years of SaaS GTM experience! Ask her: What's the biggest change you've seen in how companies enable their teams?" },
      { emoji: 'üî¨', text: "Jennie researches audiences using sales data before building programs! Ask her: Walk me through your audience research process." },
      
      // Leadership & Coaching Experience
      { emoji: 'üèÜ', text: "Jennie calls herself 'seasoned'! Ask her: What's one lesson that took years to learn but changed everything?" },
      { emoji: 'üë•', text: "Jennie has lived roles across the entire customer lifecycle! Ask her: How does that experience shape your enablement approach?" },
      { emoji: 'üí°', text: "Jennie loves prompt engineering and GenAI! Ask her: What's your favorite creative AI application for enablement?" },
      { emoji: 'üå±', text: "Jennie has coached people in sales, marketing, and customer service! Ask her: What's the most rewarding coaching moment you've had?" }
    ];

    let cards = [];
    let flippedCards = [];
    let matchedPairs = 0;
    let moves = 0;
    let score = 0;
    let questionsAsked = 0;
    let isProcessing = false;
    let usedQuestions = [];
    let startTime = null;
    let lastMatchTime = null;

    function shuffleArray(array) {
      const shuffled = [...array];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }

    function createCards() {
      const cardPairs = [...emojis, ...emojis];
      return shuffleArray(cardPairs).map((emoji, index) => ({
        id: index,
        emoji: emoji,
        isFlipped: false,
        isMatched: false
      }));
    }

    function renderBoard() {
      const board = document.getElementById('game-board');
      board.innerHTML = '';
      
      cards.forEach((card, index) => {
        const cardEl = document.createElement('div');
        cardEl.className = 'card-container aspect-square cursor-pointer';
        cardEl.innerHTML = `
          <div class="card w-full h-full ${card.isFlipped || card.isMatched ? 'flipped' : ''} ${card.isMatched ? 'matched' : ''}" data-id="${card.id}">
            <div class="card-face card-front card-front-pattern shadow-lg">
              <span class="text-3xl md:text-4xl text-white/80">?</span>
            </div>
            <div class="card-face card-back bg-white shadow-lg">
              <span class="text-4xl md:text-5xl">${card.emoji}</span>
            </div>
          </div>
        `;
        
        cardEl.addEventListener('click', () => handleCardClick(card.id));
        board.appendChild(cardEl);
      });
    }

    function handleCardClick(cardId) {
      if (isProcessing) return;
      
      const card = cards.find(c => c.id === cardId);
      if (!card || card.isFlipped || card.isMatched) return;
      
      // Start timer on first card flip
      if (startTime === null) {
        startTime = Date.now();
        lastMatchTime = startTime;
      }
      
      card.isFlipped = true;
      flippedCards.push(card);
      renderBoard();
      
      if (flippedCards.length === 2) {
        isProcessing = true;
        moves++;
        
        const [first, second] = flippedCards;
        
        if (first.emoji === second.emoji) {
          first.isMatched = true;
          second.isMatched = true;
          matchedPairs++;
          
          // Calculate speed bonus (faster = more points)
          const currentTime = Date.now();
          const timeSinceLastMatch = (currentTime - lastMatchTime) / 1000; // in seconds
          lastMatchTime = currentTime;
          
          let matchPoints = 100; // Base points for a match
          
          // Speed bonus: award extra points for quick matches
          if (timeSinceLastMatch < 3) {
            matchPoints += 50; // Lightning fast!
          } else if (timeSinceLastMatch < 5) {
            matchPoints += 30; // Very fast
          } else if (timeSinceLastMatch < 8) {
            matchPoints += 10; // Quick
          }
          
          score += matchPoints;
          flippedCards = [];
          
          setTimeout(() => {
            renderBoard();
            showQuestion();
            isProcessing = false;
            updateStats();
            
            if (matchedPairs === 6) {
              setTimeout(showWinModal, 1500);
            }
          }, 500);
        } else {
          setTimeout(() => {
            first.isFlipped = false;
            second.isFlipped = false;
            flippedCards = [];
            renderBoard();
            isProcessing = false;
            updateStats();
          }, 1000);
        }
      }
    }

    function showQuestion() {
      const availableQuestions = questions.filter((_, i) => !usedQuestions.includes(i));
      if (availableQuestions.length === 0) {
        usedQuestions = [];
        return showQuestion();
      }
      
      const randomIndex = Math.floor(Math.random() * availableQuestions.length);
      const originalIndex = questions.indexOf(availableQuestions[randomIndex]);
      usedQuestions.push(originalIndex);
      
      const question = availableQuestions[randomIndex];
      questionsAsked++;
      updateStats();
      
      document.getElementById('question-emoji').textContent = question.emoji;
      document.getElementById('question-text').textContent = question.text;
      document.getElementById('question-modal').classList.remove('hidden');
    }

    function updateStats() {
      document.getElementById('score').textContent = score;
      document.getElementById('moves').textContent = moves;
      document.getElementById('matches').textContent = `${matchedPairs}/6`;
    }

    function showWinModal() {
      const totalTime = ((Date.now() - startTime) / 1000).toFixed(1);
      document.getElementById('win-stats').textContent = `Final Score: ${score} points | Completed in ${moves} moves and ${totalTime} seconds!`;
      document.getElementById('win-modal').classList.remove('hidden');
    }

    function resetGame() {
      cards = createCards();
      flippedCards = [];
      matchedPairs = 0;
      moves = 0;
      score = 0;
      questionsAsked = 0;
      usedQuestions = [];
      isProcessing = false;
      startTime = null;
      lastMatchTime = null;
      updateStats();
      renderBoard();
      document.getElementById('win-modal').classList.add('hidden');
    }

    document.getElementById('close-question').addEventListener('click', () => {
      document.getElementById('question-modal').classList.add('hidden');
    });

    document.getElementById('play-again').addEventListener('click', resetGame);

    // Initialize game
    cards = createCards();
    renderBoard();

    // Element SDK Integration
    async function onConfigChange(config) {
      document.getElementById('game-title').textContent = config.game_title || defaultConfig.game_title;
      document.getElementById('subtitle').textContent = config.subtitle || defaultConfig.subtitle;
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.primary_color || defaultConfig.primary_color,
            set: (value) => {
              config.primary_color = value;
              window.elementSdk.setConfig({ primary_color: value });
            }
          },
          {
            get: () => config.secondary_color || defaultConfig.secondary_color,
            set: (value) => {
              config.secondary_color = value;
              window.elementSdk.setConfig({ secondary_color: value });
            }
          },
          {
            get: () => config.accent_color || defaultConfig.accent_color,
            set: (value) => {
              config.accent_color = value;
              window.elementSdk.setConfig({ accent_color: value });
            }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => {
              config.text_color = value;
              window.elementSdk.setConfig({ text_color: value });
            }
          },
          {
            get: () => config.card_color || defaultConfig.card_color,
            set: (value) => {
              config.card_color = value;
              window.elementSdk.setConfig({ card_color: value });
            }
          }
        ],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ["game_title", config.game_title || defaultConfig.game_title],
        ["subtitle", config.subtitle || defaultConfig.subtitle]
      ]);
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c1a773af46f32bf',t:'MTc2OTAzNjgyNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
